<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Three.js Categories Star Systems</title>
  <style>
    @font-face { 
      font-family: 'Nebulax'; 
      src: url('assets/fonts/Nebulax-3lqLp.ttf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'Alamanca'; 
      src: url('assets/fonts/AlamancaDemo-Wp8Mn.ttf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'Cybera'; 
      src: url('assets/fonts/CyberaFontDemo-m2oj5.otf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'Moonstrike'; 
      src: url('assets/fonts/Moonstrike-nRqzP.otf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'SolarSpace'; 
      src: url('assets/fonts/SolarSpaceDemoRegular-JR9ao.ttf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'SolarSpaceAlt'; 
      src: url('assets/fonts/SolarSpaceDemoRegular-VGpqx.otf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'Venite'; 
      src: url('assets/fonts/VeniteAdoremus-rgRBA.ttf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'VeniteStraight'; 
      src: url('assets/fonts/VeniteAdoremusStraight-Yzo6v.ttf'); 
      font-display: swap;
    }
    @font-face { 
      font-family: 'NebulaxAlt'; 
      src: url('assets/fonts/Nebulax-Zp8d3.otf'); 
      font-display: swap;
    }
    
    body { margin: 0; overflow: hidden; }
    #tooltip {
  --star-r: 255;
  --star-g: 255;
  --star-b: 255;
      position: absolute;
      background: rgba(255, 255, 255, 0.1); /* Fallback */
      background: color-mix(in srgb, rgb(var(--star-r, 255), var(--star-g, 255), var(--star-b, 255)) 10%, transparent);
      backdrop-filter: blur(5px);
      border: 1px solid rgba(var(--star-r, 255), var(--star-g, 255), var(--star-b, 255), 0.3);
      border-radius: 8px;
      color: rgb(var(--star-r, 255), var(--star-g, 255), var(--star-b, 255));
      padding: 12px 16px;
      font-family: 'Nebulax', sans-serif;
      display: none;
      pointer-events: none;
      box-shadow: inset 0 0 10px rgba(var(--star-r, 255), var(--star-g, 255), var(--star-b, 255), 0.3);
      text-shadow: none;
      z-index: 1000; /* Ensure tooltip is above everything */
    }

    .holographic-tooltip {
      border-left: 3px solid rgba(0, 255, 255, 0.7);
      padding-left: 8px;
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div id="tooltip"></div>
  <script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@latest/build/three.module.js",
    "three/addons/": "https://unpkg.com/three@latest/examples/jsm/"
  }
}
</script>

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';

    // Data for categories (star systems) and their certifications

const categories = [
  {
    name: 'Web Development',
    club: 'Forge (Web Development)',
    description: 'Web development technologies and frameworks',
    position: new THREE.Vector3(-10, 10, 0),
    model: 'models/web_development.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0xFFB020,
    certifications: [
      { title: 'Modern React + TypeScript: Production Patterns (6 weeks)', date: '2025-07-30' },
      { title: 'Progressive Web Apps & Service Workers (6 weeks)', date: '2025-06-15' },
      { title: 'Performance Engineering for the Web (7 weeks)', date: '2025-05-20' },
      { title: 'Building Scalable APIs with Node.js & Fastify (6 weeks)', date: '2025-04-10' },
      { title: 'Full-Stack Testing: Jest, Playwright & CI (6 weeks)', date: '2025-03-12' }
    ]
  },
  {
    name: 'Strategy & Design',
    club: 'Canvas (Strategy & Design)',
    description: 'Strategic planning and design methodologies',
    position: new THREE.Vector3(10, -10, 10),
    model: 'models/strategy_design.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x3A8DFF,
    certifications: [
      { title: 'Design Systems for Engineers (5 weeks)', date: '2025-08-01' },
      { title: 'UX Engineering: Interaction & Accessibility (5 weeks)', date: '2025-06-20' },
      { title: 'Frontend Architecture & Component-Driven Design (6 weeks)', date: '2025-05-05' },
      { title: 'Visual Performance & Perceived Speed (5 weeks)', date: '2025-03-30' }
    ]
  },
  {
    name: 'Security',
    club: 'Aegis (Security)',
    description: 'Cybersecurity and secure coding practices',
    position: new THREE.Vector3(0, 15, 15),
    model: 'models/security.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x2ECC71,
    certifications: [
      { title: 'Applied Secure Coding in JavaScript (6 weeks)', date: '2025-07-27' },
      { title: 'Threat Modelling & Secure Architecture (6 weeks)', date: '2025-06-10' },
      { title: 'Secure DevOps: Secrets, IaC & Runtime Defense (6 weeks)', date: '2025-05-22' },
      { title: 'Web App Penetration Testing Fundamentals (5 weeks)', date: '2025-04-18' }
    ]
  },
  {
    name: 'Programming',
    club: 'Core (Programming)',
    description: 'Core programming languages and paradigms',
    position: new THREE.Vector3(0, 15, 0),
    model: 'models/programming.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x8E44AD,
    certifications: [
      { title: 'Advanced Algorithms & Data Structures (7 weeks)', date: '2025-07-24' },
      { title: 'Production C# & .NET Patterns (6 weeks)', date: '2025-06-30' },
      { title: 'Python for Engineering: Type-Driven Development (6 weeks)', date: '2025-05-20' },
      { title: 'Java Modernization: Lambdas to Reactive (6 weeks)', date: '2025-04-12' },
      { title: 'System Design for Engineers (7 weeks)', date: '2025-03-01' }
    ]
  },
  {
    name: 'AI & ML',
    club: 'Neuron (AI & ML)',
    description: 'Artificial intelligence and machine learning technologies',
    position: new THREE.Vector3(15, 0, 0),
    model: 'models/ai_ml.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x00D1B2,
    certifications: [
      { title: 'Applied Machine Learning Engineering (5 months)', date: '2025-07-20' },       // verified 5-month program :contentReference[oaicite:8]{index=8} 
      { title: 'Production LLM Engineering with Retrieval (6 weeks)', date: '2025-06-15' },
      { title: 'Agent Architectures & Orchestration (6 weeks)', date: '2025-05-10' },
      { title: 'ModelOps: Serving, Monitoring & Drift (6 weeks)', date: '2025-04-01' },
      { title: 'Applied Machine Learning Systems: an Introduction (8 weeks)', date: '2025-03-15' } // verified 8 weeks :contentReference[oaicite:9]{index=9} 
    ]
  },
  {
    name: 'Cloud & Data Engineering',
    club: 'Nimbus (Cloud & Data Engineering)',
    description: 'Cloud computing and data pipeline engineering',
    position: new THREE.Vector3(-15, 0, 0),
    model: 'models/cloud_data_engineering.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x6C5CE7,
    certifications: [
      { title: 'Cloud-Native Data Pipelines with Kafka & Flink (7 weeks)', date: '2025-10-06' },
      { title: 'Data Engineering with BigQuery & Snowflake (6 weeks)', date: '2025-06-30' },
      { title: 'Infrastructure as Code for Data Platforms (6 weeks)', date: '2025-05-12' }
    ]
  },
  {
    name: 'DevOps & Tools',
    club: 'Flux (DevOps & Tools)',
    description: 'DevOps practices and tooling ecosystem',
    position: new THREE.Vector3(0, -15, 0),
    model: 'models/devops_tools.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0xF39C12,
    certifications: [
      { title: 'CI/CD Engineering with GitHub Actions & ArgoCD (6 weeks)', date: '2025-07-29' },
      { title: 'Containerization & Kubernetes for Developers (6 weeks)', date: '2025-07-21' },
      { title: 'Observability for Engineers: Logs, Metrics & Traces (5 weeks)', date: '2025-06-05' }
    ]
  },
  {
    name: 'Data Analysis',
    club: 'Datum (Data Analysis)',
    description: 'Data analysis techniques and visualization',
    position: new THREE.Vector3(0, 0, -15),
    model: 'models/data_analysis.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x00A3FF,
    certifications: [
      { title: 'Applied Data Engineering with Python (6 weeks)', date: '2024-07-17' },
      { title: 'Data Visualization Engineering with D3 & Vega (6 weeks)', date: '2024-06-17' },
      { title: 'ML Feature Engineering at Scale (6 weeks)', date: '2024-06-13' },
      { title: 'End-to-End Analytics Pipelines (5 weeks)', date: '2024-03-20' }
    ]
  },
  {
    name: 'Databases & SQL',
    club: 'Vault (Databases & SQL)',
    description: 'Database management and SQL querying',
    position: new THREE.Vector3(-10, -10, 0),
    model: 'models/databases_sql.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0xF6C85F,
    certifications: [
      { title: 'Postgres Performance & Indexing (6 weeks)', date: '2024-11-05' },
      { title: 'Advanced MySQL & Replication (6 weeks)', date: '2024-10-22' },
      { title: 'Designing Reliable Database Schemas (5 weeks)', date: '2024-09-11' },
      { title: 'SQL for Developers: Window Functions & CTEs (5 weeks)', date: '2024-05-02' }
    ]
  },
  {
    name: 'Soft Skills',
    club: 'Human (Soft Skills)',
    description: 'Interpersonal and professional development skills',
    position: new THREE.Vector3(10, -10, 0),
    model: 'models/soft_skills.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x34D399,
    certifications: [
      { title: 'Communication for Engineers: Writing & Meetings (5 weeks)', date: '2025-06-08' },
      { title: 'Career Growth & Tech Leadership for Devs (5 weeks)', date: '2024-09-11' },
      { title: 'Effective Code Reviews & Collaboration (5 weeks)', date: '2024-05-17' }
    ]
  },
  {
    name: 'Business & ERP',
    club: 'Ledger (Business & ERP)',
    description: 'Business systems and enterprise resource planning',
    position: new THREE.Vector3(10, 10, 0),
    model: 'models/business_erp.glb',
    primitive: new THREE.SphereGeometry(1, 32, 32),
    color: 0x7C4DFF,
    certifications: [
      { title: 'Product Thinking for Engineers (5 weeks)', date: '2024-05-31' },
      { title: 'Technical Roadmapping & Stakeholder Management (6 weeks)', date: '2025-02-15' },
      { title: 'SaaS Metrics for Engineering Teams (6 weeks)', date: '2024-12-01' }
    ]
  }
];


    // GLTFLoader for 3D models
    const loader = new GLTFLoader();

    // Scene setup
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x101010);
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 15, 30);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

    // Add ambient light and a point light at each star (club)
    scene.add(new THREE.AmbientLight(0x404040));
    categories.forEach(cat => {
      const point = new THREE.PointLight(cat.color, 1, 50);
      point.position.copy(cat.position);
      scene.add(point);
    });

    // Add event listeners for each star
    categories.forEach(category => {
      if (category.systemGroup) {
        category.systemGroup.traverse(child => {
          if (child.isMesh) {
            child.name = category.name;
            child.addEventListener('mouseenter', () => {
              const color = new THREE.Color(category.color);
              document.documentElement.style.setProperty('--star-r', Math.floor(color.r * 255));
              document.documentElement.style.setProperty('--star-g', Math.floor(color.g * 255));
              document.documentElement.style.setProperty('--star-b', Math.floor(color.b * 255));
            });
          }
        });
      }
    });

    // OrbitControls for camera interaction
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.minDistance = 5;
    controls.maxDistance = 100;

    // Group to contain all systems (for raycasting convenience)
    const starGroup = new THREE.Group();
    scene.add(starGroup);

    // Raycaster setup for tooltips
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const tooltip = document.getElementById('tooltip');

    // Create each category's star system
    categories.forEach(cat => {
      // Parent group for this star system
      const sysGroup = new THREE.Group();
      sysGroup.position.copy(cat.position);
      starGroup.add(sysGroup);
      cat.systemGroup = sysGroup;  // store for animation

      // Try loading GLB model first
      loader.load(
        cat.model,
        (gltf) => {
          const model = gltf.scene;
          model.position.set(0, 0, 0);
          const scaleFactor = normalizeModelScale(model);
          model.scale.set(scaleFactor, scaleFactor, scaleFactor);
          model.userData = { title: cat.club, description: cat.description };
          sysGroup.add(model);
        },
        undefined,
        (error) => {
          console.warn(`Failed to load ${cat.model}, using primitive fallback`);
          // Fallback to primitive geometry
          const starGeo = new THREE.SphereGeometry(1.5, 32, 32);
          const starMat = new THREE.MeshBasicMaterial({ color: cat.color });
          const star = new THREE.Mesh(starGeo, starMat);
          star.position.set(0, 0, 0);
          star.userData = { title: cat.club, description: cat.description };
          sysGroup.add(star);
        }
      );

      // Create planets (certifications) and orbit lines
      // Group planets in rings of up to 8
        const planetsPerRing = 8;
        let currentRing = 0;
        let planetsInCurrentRing = 0;

        cat.certifications.forEach((cert, idx) => {
          if (planetsInCurrentRing >= planetsPerRing) {
            currentRing++;
            planetsInCurrentRing = 0;
          }
          
          const orbitRadius = 3 + currentRing * 3;
          const angle = (planetsInCurrentRing / planetsPerRing) * Math.PI * 2;
          
          // Create orbit line for this ring (once per ring)
          if (planetsInCurrentRing === 0) {
            const orbitPoints = [];
            const segments = 64;
            for (let i = 0; i <= segments; i++) {
              const segmentAngle = (i / segments) * Math.PI * 2;
              orbitPoints.push(new THREE.Vector3(
                Math.cos(segmentAngle) * orbitRadius,
                0,
                Math.sin(segmentAngle) * orbitRadius
              ));
            }
            const orbitLine = new THREE.LineLoop(
              new THREE.BufferGeometry().setFromPoints(orbitPoints),
              new THREE.LineBasicMaterial({ 
                color: 0x888888,
                transparent: true,
                opacity: 0.8
              })
            );
            sysGroup.add(orbitLine);
          }

          // Club to planet model mapping (moved outside loop)
const clubPlanetModels = {
  'Forge (Web Development)': 'models/planet_web_development.glb',
  'Canvas (Strategy & Design)': 'models/planet_strategy_design.glb',
  'Aegis (Security)': 'models/planet_security.glb',
  'Core (Programming)': 'models/planet_programming.glb',
  'Neuron (AI & ML)': 'models/planet_ai_ml.glb',
  'Nimbus (Cloud & Data Engineering)': 'models/planet_cloud_data.glb',
  'Flux (DevOps & Tools)': 'models/planet_devops_tools.glb',
  'Datum (Data Analysis)': 'models/planet_data_analysis.glb',
  'Vault (Databases & SQL)': 'models/planet_databases_sql.glb',
  'Human (Soft Skills)': 'models/planet_soft_skills.glb',
  'Ledger (Business & ERP)': 'models/planet_business_erp.glb',
  'Code Club': 'models/planet_code_club.glb',
  'Design Club': 'models/planet_design_club.glb',
  'Security Club': 'models/planet_security_club.glb',
  'Programming Club': 'models/planet_programming_club.glb',
  'AI Club': 'models/planet_ai_club.glb',
  'Cloud Club': 'models/planet_cloud_club.glb',
  'DevOps Club': 'models/planet_devops_club.glb',
  'Data Club': 'models/planet_data_club.glb',
  'Database Club': 'models/planet_database_club.glb',
  'Soft Skills Club': 'models/planet_soft_skills_club.glb',
  'Business Club': 'models/planet_business_club.glb'
};
          
          // Determine the appropriate planet model for this club
          const planetModelPath = clubPlanetModels[cat.club] || 'models/planet_default.glb';
          loader.load(
            planetModelPath,
            (gltf) => {
              const planet = gltf.scene;
              const scaleFactor = normalizeModelScale(planet, 5, 0.4);
              planet.scale.set(scaleFactor, scaleFactor, scaleFactor);
              planet.position.set(
                Math.cos(angle) * orbitRadius,
                0,
                Math.sin(angle) * orbitRadius
              );
              // Store certification info for the tooltip
              planet.userData = { title: cert.title, date: cert.date };
              sysGroup.add(planet);
            },
            undefined,
            (error) => {
              console.warn('Failed to load planet model, using fallback');
              // Fallback to primitive geometry
              const planetGeo = new THREE.SphereGeometry(0.4, 16, 16);
              const planetMat = new THREE.MeshLambertMaterial({ color: 0xffffff });
              const planet = new THREE.Mesh(planetGeo, planetMat);
              planet.position.set(
                Math.cos(angle) * orbitRadius,
                0,
                Math.sin(angle) * orbitRadius
              );
              planet.userData = { title: cert.title, date: cert.date };
              sysGroup.add(planet);
            }
          );
          
          planetsInCurrentRing++;
        });
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // Variables to track hover state
    let isHovering = false;
    let hoveredPlanet = null;
    let originalRotationSpeed = 0.5;

    // Tooltip display on hover
    window.addEventListener('pointermove', event => {
      const rect = renderer.domElement.getBoundingClientRect();
      mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
      mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;

      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObjects(starGroup.children, true);
      
      if (intersects.length > 0) {
        let obj = intersects[0].object;
        // Check parent groups for userData if this is a GLTF mesh
        let displayTitle = '';
        let displayDate = '';
        let categoryColor = 0xFFFFFF; // Default white color
        
        // Traverse up to find the object with userData 
        while (obj && !obj.userData?.title && obj.parent) {
          obj = obj.parent;
        }
        
        if (obj.userData && (obj.userData.title || obj.userData.date)) {
          if (!isHovering || hoveredPlanet !== obj) {
            isHovering = true;
            hoveredPlanet = obj;
            
            // Set display values
            displayTitle = obj.userData.title || 'Unnamed Certification';
            displayDate = obj.userData.date || '';
            
            // Find the category color by traversing up to find the system group
            let parent = obj.parent;
            while (parent && parent !== starGroup) {
              const category = categories.find(cat => cat.systemGroup === parent);
              if (category) {
                categoryColor = category.color;
                break;
              }
              parent = parent.parent;
            }
            
            // Set CSS custom properties with the category color
        const color = new THREE.Color(categoryColor);
        document.documentElement.style.setProperty('--star-r', Math.floor(color.r * 255));
        document.documentElement.style.setProperty('--star-g', Math.floor(color.g * 255));
        document.documentElement.style.setProperty('--star-b', Math.floor(color.b * 255));
            
            // Update tooltip content and position
            tooltip.innerHTML = `<div class="holographic-tooltip">${displayTitle}</div>${displayDate ? `<div>${displayDate}</div>` : ''}`;
            tooltip.style.display = 'block';
            tooltip.style.left = `${event.clientX + 15}px`;
            tooltip.style.top = `${event.clientY + 15}px`;
            
            // Find parent system group to pause its rotation
            let systemParent = obj.parent;
            while (systemParent && systemParent !== starGroup) {
              if (categories.some(cat => cat.systemGroup === systemParent)) {
                systemParent.userData.originalRotation = systemParent.rotation.y;
                systemParent.userData.isPaused = true;
                
                // Add hover effects to orbit
                systemParent.children.forEach(child => {
                  if (child instanceof THREE.LineLoop && child.material) {
                    child.material.color.setHex(0x00ff00);
                    child.material.emissive.setHex(0x00ff00);
                    child.material.emissiveIntensity = 0.5;
                    child.material.needsUpdate = true;
                    
                    // Add pulse animation
                    const pulse = () => {
                      child.scale.set(1.05, 1.05, 1.05);
                      setTimeout(() => {
                        child.scale.set(1, 1, 1);
                      }, 200);
                    };
                    pulse();
                    setInterval(pulse, 2000);
                  }
                });
                
                break;
              }
              systemParent = systemParent.parent;
            }

        }
              
              .planet-web { 
  color: #FFD166; 
  font-family: 'NebulaxAlt'; 
  text-shadow: 
    0 0 2px rgba(255, 209, 102, 0.8),
    0 0 4px rgba(255, 209, 102, 0.6),
    0 0 6px rgba(255, 209, 102, 0.4);
  background: rgba(255, 209, 102, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-design { 
  color: #6ECFF6; 
  font-family: 'Alamanca'; 
  text-shadow: 
    0 0 2px rgba(110, 207, 246, 0.8),
    0 0 4px rgba(110, 207, 246, 0.6),
    0 0 6px rgba(110, 207, 246, 0.4);
  background: rgba(110, 207, 246, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-security { 
  color: #7ED957; 
  font-family: 'VeniteStraight'; 
  text-shadow: 
    0 0 2px rgba(126, 217, 87, 0.8),
    0 0 4px rgba(126, 217, 87, 0.6),
    0 0 6px rgba(126, 217, 87, 0.4);
  background: rgba(126, 217, 87, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-programming { 
  color: #8E44AD; 
  font-family: 'Moonstrike'; 
  text-shadow: 
    0 0 2px rgba(142, 68, 173, 0.8),
    0 0 4px rgba(142, 68, 173, 0.6),
    0 0 6px rgba(142, 68, 173, 0.4);
  background: rgba(142, 68, 173, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-ai { 
  color: #00D1B2; 
  font-family: 'Cybera'; 
  text-shadow: 
    0 0 2px rgba(0, 209, 178, 0.8),
    0 0 4px rgba(0, 209, 178, 0.6),
    0 0 6px rgba(0, 209, 178, 0.4);
  background: rgba(0, 209, 178, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-cloud { 
  color: #6C5CE7; 
  font-family: 'Nebulax'; 
  text-shadow: 
    0 0 2px rgba(108, 92, 231, 0.8),
    0 0 4px rgba(108, 92, 231, 0.6),
    0 0 6px rgba(108, 92, 231, 0.4);
  background: rgba(108, 92, 231, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-devops { 
  color: #F39C12; 
  font-family: 'SolarSpace'; 
  text-shadow: 
    0 0 2px rgba(243, 156, 18, 0.8),
    0 0 4px rgba(243, 156, 18, 0.6),
    0 0 6px rgba(243, 156, 18, 0.4);
  background: rgba(243, 156, 18, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-data { 
  color: #00A3FF; 
  font-family: 'SolarSpaceAlt'; 
  text-shadow: 
    0 0 2px rgba(0, 163, 255, 0.8),
    0 0 4px rgba(0, 163, 255, 0.6),
    0 0 6px rgba(0, 163, 255, 0.4);
  background: rgba(0, 163, 255, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-database { 
  color: #F6C85F; 
  font-family: 'Venite'; 
  text-shadow: 
    0 0 2px rgba(246, 200, 95, 0.8),
    0 0 4px rgba(246, 200, 95, 0.6),
    0 0 6px rgba(246, 200, 95, 0.4);
  background: rgba(246, 200, 95, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-softskills { 
  color: #34D399; 
  font-family: 'Moonstrike'; 
  text-shadow: 
    0 0 2px rgba(52, 211, 153, 0.8),
    0 0 4px rgba(52, 211, 153, 0.6),
    0 0 6px rgba(52, 211, 153, 0.4);
  background: rgba(52, 211, 153, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              .planet-business { 
  color: #7C4DFF; 
  font-family: 'Alamanca'; 
  text-shadow: 
    0 0 2px rgba(124, 77, 255, 0.8),
    0 0 4px rgba(124, 77, 255, 0.6),
    0 0 6px rgba(124, 77, 255, 0.4);
  background: rgba(124, 77, 255, 0.1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  position: relative;
}
              
              .holographic-tooltip {
                max-width: 220px;
                font-size: 0.95em;
                padding: 12px;
                background: rgba(var(--star-r), var(--star-g), var(--star-b), 0.15);
                border: 1px solid rgba(var(--star-r), var(--star-g), var(--star-b), 0.7);
                border-radius: 6px;
                backdrop-filter: blur(8px);
                box-shadow: 0 0 25px rgba(var(--star-r), var(--star-g), var(--star-b), 0.6);
                transform: perspective(500px) rotateX(10deg) scale(0.95);
                animation: hologram-pulse 1.5s infinite alternate;
                transition: all 0.2s ease;
              }
              
              @keyframes hologram-pulse {
                0% { opacity: 0.9; text-shadow: 0 0 5px rgba(var(--star-r), var(--star-g), var(--star-b), 0.8); }
                100% { opacity: 1; text-shadow: 0 0 15px rgba(var(--star-r), var(--star-g), var(--star-b), 1); }
              }
            `;
            document.head.appendChild(style);
          }

          tooltip.style.display = 'block';
          tooltip.style.left = event.clientX + 10 + 'px';
          tooltip.style.top = event.clientY + 10 + 'px';
          
          // Determine planet class based on club name
          let planetClass = '';
          if (displayTitle.includes('Web')) planetClass = 'planet-web';
          else if (displayTitle.includes('Design')) planetClass = 'planet-design';
          else if (displayTitle.includes('Security')) planetClass = 'planet-security';
          else if (displayTitle.includes('Programming')) planetClass = 'planet-programming';
          else if (displayTitle.includes('AI')) planetClass = 'planet-ai';
          else if (displayTitle.includes('Cloud')) planetClass = 'planet-cloud';
          else if (displayTitle.includes('DevOps')) planetClass = 'planet-devops';
          else if (displayTitle.includes('Data')) planetClass = 'planet-data';
          else if (displayTitle.includes('Database')) planetClass = 'planet-database';
          else if (displayTitle.includes('Soft Skills')) planetClass = 'planet-softskills';
          else if (displayTitle.includes('Business')) planetClass = 'planet-business';
    
    tooltip.innerHTML = `
      <div class="holographic-tooltip ${planetClass}">
        <div class="title" style="
          font-size: 1.1em;
          font-weight: bold;
          text-shadow: 0 0 10px rgba(var(--star-r), var(--star-g), var(--star-b), 0.8);
          transform: perspective(100px) rotateX(5deg);
          animation: float 3s ease-in-out infinite alternate;
        ">${displayTitle}</div>
        ${displayDate ? `<div class="date" style="
          font-size: 0.9em;
          opacity: 0.8;
          animation: float 3s ease-in-out infinite alternate-reverse;
          animation-delay: 0.5s;
        ">${displayDate}</div>` : ''}
      </div>`;
            
            // Add floating animation
            const style = document.createElement('style');
            style.innerHTML = `
              @keyframes float {
                0% { transform: perspective(100px) rotateX(5deg) translateY(0); }
                100% { transform: perspective(100px) rotateX(5deg) translateY(-5px); }
              }
            `;
            document.head.appendChild(style);
            
          // Ensure tooltip stays visible
          const rect = tooltip.getBoundingClientRect();
          if (rect.right > window.innerWidth) {
            tooltip.style.left = (event.clientX - rect.width - 10) + 'px';
          }
          if (rect.bottom > window.innerHeight) {
            tooltip.style.top = (event.clientY - rect.height - 10) + 'px';
          }
          return;
        }
      }
      
      if (isHovering) {
        isHovering = false;
        hoveredPlanet = null;
        // Resume rotation for all systems
        categories.forEach(cat => {
          if (cat.systemGroup && cat.systemGroup.userData.isPaused) {
            cat.systemGroup.userData.isPaused = false;
          }
        });
      }
      tooltip.style.display = 'none';
    });

    // Animate loop: rotate each system to make planets orbit
    const clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();
      categories.forEach(cat => {
        if (cat.systemGroup && !cat.systemGroup.userData.isPaused) {
          cat.systemGroup.rotation.y += originalRotationSpeed * delta;
        }
      });
      controls.update();
      renderer.render(scene, camera);
    }

    // Load custom GLB models
    // Global configuration for model scaling
    const MODEL_SCALE_CONFIG = {
      maxAllowedSize: 5 // Can be adjusted based on scene requirements
    };
    
    function normalizeModelScale(model, targetSize = MODEL_SCALE_CONFIG.maxAllowedSize, baseScale = 1.5) {
      const box = new THREE.Box3().setFromObject(model);
      const size = box.getSize(new THREE.Vector3());
      const maxDimension = Math.max(size.x, size.y, size.z);
      
      console.log(`Normalizing scale - Max dimension: ${maxDimension}, Target size: ${targetSize}`);
      
      if (maxDimension * baseScale > targetSize) {
        const scaleFactor = (targetSize / maxDimension) * baseScale;
        console.log(`Calculated normalized scale factor: ${scaleFactor.toFixed(2)}`);
        return scaleFactor;
      }
      console.log(`Using base scale: ${baseScale}`);
      return baseScale;
    }
    
    const scaleModelToBounds = (model, targetScale) => {
      const scaleFactor = normalizeModelScale(model, MODEL_SCALE_CONFIG.maxAllowedSize, targetScale);
      model.scale.set(scaleFactor, scaleFactor, scaleFactor);
      console.log(`Final scale applied:`, model.scale);
      return model;
    };
    
    const loadModel = (path, position, scale) => {
      return new Promise((resolve, reject) => {
        loader.load(
          path,
          (gltf) => {
            const model = gltf.scene;
            scaleModelToBounds(model, scale);
            model.position.copy(position);
            scene.add(model);
            resolve(model);
          },
          undefined,
          (error) => {
            console.error('Error loading model:', error);
            reject(error);
          }
        );
      });
    };

    // Required GLB files for each category:
    // - web_development.glb
    // - strategy_design.glb
    // - security.glb
    // - programming.glb
    // - ai_ml.glb
    // - cloud_data_engineering.glb
    // - devops_tools.glb
    // - data_analysis.glb
    // - databases_sql.glb
    // - soft_skills.glb
    // - business_erp.glb
        // Loading indicator element
    const loadingIndicator = document.createElement('div');
    loadingIndicator.style.position = 'fixed';
    loadingIndicator.style.top = '0';
    loadingIndicator.style.left = '0';
    loadingIndicator.style.width = '100%';
    loadingIndicator.style.height = '4px';
    loadingIndicator.style.backgroundColor = '#4285f4';
    loadingIndicator.style.zIndex = '1000';
    loadingIndicator.style.transformOrigin = '0% 50%';
    loadingIndicator.style.transform = 'scaleX(0)';
    loadingIndicator.style.transition = 'transform 0.4s ease';
    document.body.appendChild(loadingIndicator);

    // Animation optimization for mobile
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    if (isMobile) {
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.shadowMap.enabled = false;
      renderer.antialias = false;
    }

    // Update loading progress
    function updateLoadingProgress(progress) {
      loadingIndicator.style.transform = `scaleX(${progress})`;
    }

    // Remove loading indicator when done with additional 1 second delay
    function loadingComplete() {
      loadingIndicator.style.transition = 'opacity 0.5s ease';
      loadingIndicator.style.opacity = '0';
      setTimeout(() => {
        document.body.removeChild(loadingIndicator);
      }, 1500); // 1000ms (1 second) + original 500ms fade out
    }

    animate();
  </script>
</body>
</html>