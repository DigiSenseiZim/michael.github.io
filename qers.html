<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Skills Visualization - Michael</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
        }
        canvas { 
            display: block; 
        }
        #tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #4fc3f7;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 300px;
            backdrop-filter: blur(10px);
        }
        #tooltip.visible {
            opacity: 1;
        }
        #title {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>
    <div id="title">Michael's Skills Portfolio</div>
    <div id="tooltip"></div>

    <!-- Include required libraries via CDN -->
    <script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.module.js';
import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.128.0/examples/jsm/controls/OrbitControls.js';
window.THREE = THREE;
window.OrbitControls = OrbitControls;
</script>
<script>
        // Initialize THREE immediately
        if (!window.THREE) {
            console.error('THREE.js not loaded');
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script type="module">
        // Skills data structure
        const skillsData = {
            name: "Michael",
            children: [
                {
                    name: "Frontend",
                    color: "#4fc3f7",
                    children: [
                        { name: "React", value: 90, experience: "4 years", projects: ["E-commerce Platform","Dashboard App"] },
                        { name: "Vue.js", value: 80, experience: "3 years", projects: ["Admin Panel","Real-time Chat"] },
                        { name: "Angular", value: 70, experience: "2 years", projects: ["Enterprise App"] },
                        { name: "JavaScript", value: 95, experience: "6 years", projects: ["All Frontend Projects"] },
                        { name: "TypeScript", value: 85, experience: "3 years", projects: ["Large-scale Applications"] },
                        { name: "HTML/CSS", value: 95, experience: "6 years", projects: ["All Web Projects"] }
                    ]
                },
                {
                    name: "Backend",
                    color: "#ff8a65",
                    children: [
                        { name: "Node.js", value: 90, experience: "4 years", projects:["REST APIs","Microservices"] },
                        { name: "Python", value: 85, experience: "5 years", projects:["Data Processing","ML Integration"] },
                        { name: "Java", value: 75, experience: "3 years", projects:["Enterprise Systems"] },
                        { name: "C#", value: 70, experience: "2 years", projects:["Desktop Applications"] },
                        { name: "SQL", value: 85, experience: "5 years", projects:["Database Design"] },
                        { name: "MongoDB", value: 80, experience: "3 years", projects:["NoSQL Solutions"] }
                    ]
                },
                {
                    name: "AI/ML",
                    color: "#ba68c8",
                    children: [
                        { name:"TensorFlow", value:80, experience:"3 years", projects:["Image Recognition"] },
                        { name:"PyTorch", value:75, experience:"2 years", projects:["NLP Models"] },
                        { name:"Scikit-learn", value:85, experience:"4 years", projects:["Predictive Models"] },
                        { name:"OpenCV", value:70, experience:"2 years", projects:["Computer Vision"] }
                    ]
                },
                {
                    name: "Cloud",
                    color: "#4db6ac",
                    children:[
                        {name:"AWS", value:85, experience:"4 years", projects:["Scalable Infrastructure"]},
                        {name:"Azure", value:75, experience:"3 years", projects:["Enterprise Solutions"]},
                        {name:"Docker", value:80, experience:"3 years", projects:["Containerization"]},
                        {name:"Kubernetes", value:70, experience:"2 years", projects:["Orchestration"]}
                    ]
                },
                {
                    name:"Security",
                    color:"#ffd54f",
                    children:[
                        {name:"OAuth", value:80, experience:"3 years", projects:["Authentication Systems"]},
                        {name:"JWT", value:85, experience:"3 years", projects:["Secure APIs"]},
                        {name:"Pen Testing", value:70, experience:"2 years", projects:["Vulnerability Assessment"]}
                    ]
                },
                {
                    name:"DevOps",
                    color:"#a1887f",
                    children:[
                        {name:"Git", value:90, experience:"5 years", projects:["All Projects"]},
                        {name:"Jenkins", value:75, experience:"3 years", projects:["CI/CD Pipelines"]},
                        {name:"Terraform", value:70, experience:"2 years", projects:["Infrastructure as Code"]}
                    ]
                }
            ]
        };

        // Scene setup with error handling
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111122);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 8, 20);
camera.lookAt(0, 2, 0);
        
        const renderer = new THREE.WebGLRenderer({
  antialias: true,
  alpha: true,
  powerPreference: 'high-performance',
  logarithmicDepthBuffer: true
});
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        
        // Verify WebGL support
        if (!renderer.getContext()) {
          document.body.innerHTML = '<div style="padding:20px;color:white">WebGL not supported in this browser</div>';
          throw new Error('WebGL not supported');
        }
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        // Lighting setup :cite[1]
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
directionalLight.position.set(5, 15, 10);
directionalLight.castShadow = true;
directionalLight.shadow.mapSize.width = 2048;
directionalLight.shadow.mapSize.height = 2048;
scene.add(directionalLight);





        // OrbitControls for camera interaction :cite[2]
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.rotateSpeed = 0.5;

        // Raycaster for hover interactions :cite[6]:cite[8]
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        let hoveredObject = null;

        // Tooltip element
        const tooltip = document.getElementById('tooltip');

        // Create 3D visualization from skills data
        const categoryGroups = [];
        const allBars = [];

        function createVisualization() {
            const radius = 12; // Radius for circular layout
            
            skillsData.children.forEach((category, categoryIndex) => {
                const categoryGroup = new THREE.Group();
                const angle = (categoryIndex / skillsData.children.length) * Math.PI * 2;
                
                // Position category group in a circle
                categoryGroup.position.set(
                    Math.cos(angle) * radius,
                    0,
                    Math.sin(angle) * radius
                );
                
                // Create category label
                const labelGeometry = new THREE.PlaneGeometry(4, 0.8);
                const labelMaterial = new THREE.MeshBasicMaterial({ 
                    color: new THREE.Color(category.color),
                    transparent: true,
                    opacity: 0.3,
                    side: THREE.DoubleSide
                });
                const label = new THREE.Mesh(labelGeometry, labelMaterial);
                label.position.y = -2;
                label.rotation.x = -Math.PI / 2;
                categoryGroup.add(label);
                
                // Create bars for each skill
                category.children.forEach((skill, skillIndex) => {
                    const barHeight = skill.value / 5; // Scale height based on skill value
                    const barWidth = 0.8;
                    const barDepth = 0.8;
                    
                    const geometry = new THREE.BoxGeometry(barWidth, barHeight, barDepth);
                    const material = new THREE.MeshStandardMaterial({ 
                        color: new THREE.Color(category.color),
                        shininess: 100,
                        transparent: true,
                        opacity: 0.9
                    });
                    
                    const bar = new THREE.Mesh(geometry, material);
                    
                    // Position bars in a grid within category
                    const row = Math.floor(skillIndex / 3);
                    const col = skillIndex % 3;
                    
                    bar.position.set(
                        (col - 1) * 2,
                        barHeight / 2, // Position so bottom is at y=0
                        (row - 1) * 2
                    );
                    
                    // Store skill data for hover interactions
                    bar.userData = {
                        type: 'skill',
                        name: skill.name,
                        value: skill.value,
                        experience: skill.experience,
                        projects: skill.projects,
                        category: category.name,
                        categoryColor: category.color
                    };
                    
                    categoryGroup.add(bar);
                    allBars.push(bar);
                });
                
                scene.add(categoryGroup);
                categoryGroups.push(categoryGroup);
                
                // Initially hide bars for entrance animation
                categoryGroup.children.forEach(child => {
                    if (child.userData?.type === 'skill') {
                        child.scale.y = 0.001;
                        child.position.y = 0;
                    }
                });
            });
        }

        // GSAP Animations :cite[1]:cite[4]
        function setupAnimations() {
            // Animate bars growing up
            gsap.to(allBars, {
                scale: { y: 1 },
                duration: 1.5,
                ease: "bounce.out",
                stagger: {
                    amount: 1.5,
                    from: "random"
                }
            });

            // Gentle rotation animation for categories
            categoryGroups.forEach((group, index) => {
                gsap.to(group.rotation, {
                    y: Math.PI * 2,
                    duration: 20 + index * 5,
                    repeat: -1,
                    ease: "none"
                });
            });

            // Camera animation on load
            gsap.from(camera.position, {
                z: 50,
                duration: 2,
                ease: "power3.out"
            });
        }

        // Mouse move handler for hover effects :cite[6]:cite[8]
        function onMouseMove(event) {
            // Calculate mouse position in normalized device coordinates
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            // Update the picking ray with the camera and mouse position
            raycaster.setFromCamera(mouse, camera);
            
            // Calculate objects intersecting the picking ray
            const intersects = raycaster.intersectObjects(allBars);
            
            if (intersects.length > 0) {
                const intersect = intersects[0];
                
                if (hoveredObject !== intersect.object) {
                    // Reset previous hovered object
                    if (hoveredObject) {
                        gsap.to(hoveredObject.scale, { 
                            x: 1, y: 1, z: 1, 
                            duration: 0.3 
                        });
                        gsap.to(hoveredObject.material, {
                            opacity: 0.9,
                            duration: 0.3
                        });
                    }
                    
                    // Set new hovered object
                    hoveredObject = intersect.object;
                    
                    // Hover animation
                    gsap.to(hoveredObject.scale, { 
                        x: 1.2, y: 1.2, z: 1.2, 
                        duration: 0.3 
                    });
                    gsap.to(hoveredObject.material, {
                        opacity: 1,
                        duration: 0.3
                    });
                    
                    // Show tooltip
                    const skillData = hoveredObject.userData;
                    tooltip.innerHTML = `
                        <strong>${skillData.name}</strong><br>
                        Level: ${skillData.value}/100<br>
                        Experience: ${skillData.experience}<br>
                        Projects: ${skillData.projects.join(', ')}
                    `;
                    tooltip.style.borderLeftColor = skillData.categoryColor;
                    tooltip.style.left = (event.clientX + 15) + 'px';
                    tooltip.style.top = (event.clientY + 15) + 'px';
                    tooltip.classList.add('visible');
                }
            } else {
                // No intersections
                if (hoveredObject) {
                    gsap.to(hoveredObject.scale, { 
                        x: 1, y: 1, z: 1, 
                        duration: 0.3 
                    });
                    gsap.to(hoveredObject.material, {
                        opacity: 0.9,
                        duration: 0.3
                    });
                    hoveredObject = null;
                }
                tooltip.classList.remove('visible');
            }
        }

        // Window resize handler
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Animation loop :cite[1]:cite[2]
        function animate() {
            requestAnimationFrame(animate);
            
            controls.update(); // Required when damping is enabled
            
            // Update animations
            const time = Date.now() * 0.001;
            categoryGroups.forEach((group, index) => {
                group.position.y = Math.sin(time * 0.5 + index) * 0.5;
            });
            
            // Update bar positions
            allBars.forEach(bar => {
                bar.position.y = (bar.scale.y * bar.userData.value / 5) / 2;
            });
            
            renderer.render(scene, camera);
        }

        // Initialize everything
        function init() {
            // Test cube
            
            
            createVisualization();
            setupAnimations();
            
            // Event listeners
            window.addEventListener('mousemove', onMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);
            
            // Start animation loop
            animate();
        }

        // Start the application
        init();
    </script>
</body>
</html>